(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74675df8"],{"19df":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("header",[e("nav",{staticClass:"navbar navbar-expand-md",class:[{"navbar--dark":t.scrolled},t.navClass]},[e("div",{staticClass:"container"},[e("router-link",{staticClass:"navbar-brand mr-2",attrs:{to:"/"}},[e("img",{staticClass:"navbar-brand__img",attrs:{src:s("d33b"),alt:""}})]),e("div",{staticClass:"order-md-1 ml-auto"},[t._m(0),e("button",{staticClass:"btn navbar-iconbtn shadow-none",attrs:{"data-toggle":"modal","data-target":"#cartModal"}},[e("span",{staticClass:"fas fa-shopping-cart"}),t.cartCurrentNumber>0?e("span",{staticClass:"badge badge-primary"},[t._v(" "+t._s(t.cartCurrentNumber)+" ")]):t._e()])]),t._m(1),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[e("ul",{staticClass:"navbar-nav ml-auto"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("首頁")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/category"}},[t._v(" 產品 ")])],1),t._m(2)])])],1)]),e("div",{staticClass:"modal fade",attrs:{id:"cartModal",tabindex:"-1",role:"dialog","aria-labelledby":"cartModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",class:{"modal-lg":t.cartCurrentNumber>0},attrs:{role:"document"}},[e("div",{staticClass:"modal-content bg-dark text-white"},[t._m(3),e("div",{staticClass:"modal-body"},[t.cartCurrentNumber>0?e("div",[e("table",{staticClass:"table d-none d-md-table table-dark table-hover\n            text-center"},[t._m(4),e("tbody",t._l(t.carts.carts,(function(a,s){return e("tr",{key:s},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.deleteCart(a.id)}}},[e("i",{staticClass:"far fa-trash-alt"})])]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.title)+" "),a.coupon?e("div",{staticClass:"text-success"},[t._v(" 已套用優惠券 ")]):t._e()]),e("td",{staticClass:"align-middle"},[e("div",{staticClass:"c-inputGroup"},[e("button",{staticClass:"btn c-inputGroup__minusBtn",attrs:{disabled:1===a.qty},on:{click:function(s){a.qty--,t.updateCartQty(a.product_id,a.qty,a.id)}}},[e("i",{staticClass:"fas fa-minus"})]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.qty,expression:"cart.qty"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:a.qty},on:{input:function(s){s.target.composing||t.$set(a,"qty",s.target.value)}}}),e("button",{staticClass:"btn c-inputGroup__plusBtn",attrs:{disabled:10===a.qty},on:{click:function(s){a.qty++,t.updateCartQty(a.product_id,a.qty,a.id)}}},[e("i",{staticClass:"fas fa-plus"})])])]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.total)))]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.final_total)))])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v("總計")]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.carts.total)))])]),t.carts.final_total!==t.carts.total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"4"}},[t._v("折扣價")]),e("td",{staticClass:"text-right text-success"},[t._v(t._s(t._f("currency")(t.carts.final_total)))])]):t._e()])]),e("table",{staticClass:"table d-table d-md-none table-dark table-hover\n            text-center"},[t._l(t.carts.carts,(function(a,s){return e("tbody",{key:s,staticClass:"border-0"},[e("tr",[e("td",{staticClass:"align-middle",staticStyle:{width:"40px"}},[e("img",{attrs:{src:a.product.imageUrl,alt:"",width:"40"}})]),e("td",{staticClass:"align-middle text-left",attrs:{colspan:"2"}},[e("span",{staticClass:"font-weight-bold",staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(a.product.title)+" ")]),e("br"),a.product.price?e("span",{staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(t._f("currency")(a.product.price))+" ")]):e("span",{staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(t._f("currency")(a.product.origin_price))+" ")]),a.coupon?e("span",{staticClass:"text-success",staticStyle:{"font-size":"14px"}},[t._v(" 已套用優惠券 ")]):t._e()]),e("td",{staticClass:"align-middle text-right",staticStyle:{width:"35px"}},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.deleteCart(a.id)}}},[e("i",{staticClass:"far fa-trash-alt"})])])]),e("tr",[e("td",{staticClass:"align-middle border-0 p-md-margin",attrs:{colspan:"2"}},[e("div",{staticClass:"c-inputGroup"},[e("button",{staticClass:"btn c-inputGroup__minusBtn",attrs:{disabled:1===a.qty},on:{click:function(s){a.qty--,t.updateCartQty(a.product_id,a.qty,a.id)}}},[e("i",{staticClass:"fas fa-minus"})]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.qty,expression:"cart.qty"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:a.qty},on:{input:function(s){s.target.composing||t.$set(a,"qty",s.target.value)}}}),e("button",{staticClass:"btn c-inputGroup__plusBtn",attrs:{disabled:10===a.qty},on:{click:function(s){a.qty++,t.updateCartQty(a.product_id,a.qty,a.id)}}},[e("i",{staticClass:"fas fa-plus"})])])]),e("td",{staticClass:"align-middle text-right border-0",attrs:{colspan:"2"}},[t._v(" "+t._s(t._f("currency")(a.final_total))+" ")])])])})),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v(t._s(t._f("currency")(t.carts.total)))])]),t.carts.final_total!==t.carts.total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"2"}},[t._v(" 折扣價 ")]),e("td",{staticClass:"text-right text-success",attrs:{colspan:"2"}},[t._v(" "+t._s(t._f("currency")(t.carts.final_total))+" ")])]):t._e()])],2)]):e("div",{staticClass:"d-flex justify-content-center flex-column align-items-center",staticStyle:{"padding-bottom":"62px"}},[e("img",{staticClass:"img-fluid mx-auto d-block",attrs:{width:"190",src:s("f2bb"),alt:""}}),t._m(5),e("router-link",{staticClass:"btn btn-danger",attrs:{to:"/category","data-dismiss":"modal"}},[t._v(" 返回產品 ")])],1)]),t.cartCurrentNumber>0?e("div",{staticClass:"modal-footer border-0"},[e("button",{staticClass:"btn btn-outline-light px-4",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("router-link",{staticClass:"btn btn-danger px-4",attrs:{to:"/checkout","data-dismiss":"modal"}},[t._v("結帳")])],1):t._e()])])]),e("div",{staticClass:"modal fade",attrs:{id:"SigninModal",tabindex:"-1",role:"dialog","aria-labelledby":"SigninModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content bg-dark text-white"},[t._m(6),e("div",{staticClass:"modal-body"},[e("form",{staticClass:"formSignin",on:{submit:function(a){return a.preventDefault(),t.signin(a)}}},[e("img",{staticClass:"mb-4 img-fluid",attrs:{src:s("d33b"),alt:"",height:"64"}}),e("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("電子郵件")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:""},domProps:{value:t.user.username},on:{input:function(a){a.target.composing||t.$set(t.user,"username",a.target.value)}}}),e("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("密碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:"",autocomplete:""},domProps:{value:t.user.password},on:{input:function(a){a.target.composing||t.$set(t.user,"password",a.target.value)}}}),t._m(7),e("button",{staticClass:"btn btn-lg btn-danger btn-block",attrs:{type:"submit"}},[t._v("登入")])])])])])])])},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"btn navbar-iconbtn shadow-none",attrs:{type:"button","data-toggle":"modal","data-target":"#SigninModal"}},[s("span",{staticClass:"fas fa-user-cog"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent"}},[s("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{href:"https://github.com/Albertnotes/FixedGearShop_v4",target:"_blank"}},[t._v(" 作者 ")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header border-0"},[s("h5",{staticClass:"modal-title",attrs:{id:"cartModalLabel"}},[t._v("購物車")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",{staticClass:"thead-light text-nowrap"},[s("th",{staticStyle:{width:"5%"}},[t._v("刪除")]),s("th",[t._v("品名")]),s("th",{staticStyle:{width:"10%"}},[t._v("數量")]),s("th",[t._v("單價")]),s("th",[t._v("總計")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h5",{staticClass:"font-weight-bold"},[t._v(" 購物車目前沒有內容"),s("br")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header border-0"},[s("h5",{staticClass:"modal-title",attrs:{id:"SigninModalLabel"}},[t._v("登入介面")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"checkbox mb-3"},[s("label",[s("input",{attrs:{type:"checkbox",value:"remember-me"}}),t._v(" 記住我 ")])])}],i=s("1157"),n=s.n(i),c={name:"FrontHeader",data:function(){return{user:{username:"",password:""},scrolled:!1}},props:["carts","cartCurrentNumber","navClass"],methods:{signin:function(){var t="".concat("https://vue-course-api.hexschool.io","/admin/signin"),a=this;a.$http.post(t,a.user).then((function(t){t.data.success?(a.$router.push("/dashboard"),n()("#SigninModal").modal("hide")):(a.$bus.$emit("message:push",t.data.message,"danger"),n()("#SigninModal").modal("hide"))}))},deleteCart:function(t){this.$emit("delete-cart",t)},updateCartQty:function(t,a,s){this.$emit("update-cart-qty",t,a,s)},getProduct:function(t){this.$emit("search-product",t)},onScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop;t<0||(this.scrolled=t>1)}},mounted:function(){window.addEventListener("scroll",this.onScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},o=c,l=(s("c115"),s("2877")),d=Object(l["a"])(o,e,r,!1,null,"7a77aafb",null);a["a"]=d.exports},"26a3":function(t,a,s){},"26f8":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.status.isLoading},on:{"update:active":function(a){return t.$set(t.status,"isLoading",a)}}},[[s("div",{staticClass:"lds-ripple"},[s("div"),s("div")])]],2),s("front-header",{attrs:{carts:t.carts,"nav-class":["navbar-dark","bg-black"],cartCurrentNumber:t.cartCurrentNumber},on:{"delete-cart":t.deleteCart,"update-cart-qty":t.updateCartQty}}),s("main",{staticClass:"container"},[s("section",{staticClass:"l-section"},[!1===t.order.is_paid?s("h2",{staticClass:"l-section__title"},[t._v("付款確認")]):s("h2",{staticClass:"l-section__title"},[t._v("付款完成")]),!1===t.order.is_paid?s("div",{staticClass:"row justify-content-center"},[s("form",{staticClass:"col-md-10",on:{submit:function(a){return a.preventDefault(),t.payOrder(a)}}},[s("table",{staticClass:"table d-none d-md-table table-hover"},[t._m(0),s("tbody",t._l(t.order.products,(function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle text-center"},[t._v(" "+t._s(a.product.title)+" ")]),s("td",{staticClass:"align-middle text-center"},[t._v(" "+t._s(a.qty)+"/"+t._s(a.product.unit)+" ")]),s("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("currency")(a.final_total))+" ")])])})),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.order.total)))])])])]),s("table",{staticClass:"table d-table d-md-none table-hover"},[t._l(t.order.products,(function(a){return s("tbody",{key:a.id,staticClass:"border-0"},[s("tr",[s("td",{staticClass:"align-middle",attrs:{colspan:"2"}},[t._v(" "+t._s(a.product.title)+" ")])]),s("tr",[s("td",{staticClass:"align-middle border-0"},[t._v(" "+t._s(a.qty)+"/"+t._s(a.product.unit)+" ")]),s("td",{staticClass:"align-middle text-right border-0"},[t._v(" "+t._s(t._f("currency")(a.final_total))+" ")])])])})),s("tfoot",[s("tr",[s("td",{staticClass:"text-right"},[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.order.total)))])])])],2),s("table",{staticClass:"table table-hover"},[s("tbody",[s("tr",[s("th",{staticStyle:{width:"110px"}},[t._v("Email")]),s("td",[t._v(t._s(t.order.user.email))])]),s("tr",[s("th",[t._v("姓名")]),s("td",[t._v(t._s(t.order.user.name))])]),s("tr",[s("th",[t._v("收件人電話")]),s("td",[t._v(t._s(t.order.user.tel))])]),s("tr",[s("th",[t._v("收件人地址")]),s("td",[t._v(t._s(t.order.user.address))])]),s("tr",[s("th",[t._v("付款狀態")]),s("td",[t.order.is_paid?s("span",{staticClass:"text-success"},[t._v("付款完成")]):s("span",[t._v("尚未付款")])])])])]),t._m(1)])]):s("div",{staticClass:"row justify-content-center"},[t._m(2),s("div",{staticClass:"col-md-6"},[s("table",{staticClass:"table"},[t._m(3),s("tbody",t._l(t.order.products,(function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle text-center"},[t._v(" "+t._s(a.product.title)+" ")]),s("td",{staticClass:"align-middle text-center"},[t._v(" "+t._s(a.qty)+"/"+t._s(a.product.unit)+" ")]),s("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("currency")(a.final_total))+" ")])])})),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(t.order.total))+" ")])])])]),s("div",{staticClass:"text-right"},[s("router-link",{staticClass:"btn btn-outline-dark mr-3",attrs:{to:"/"}},[t._v("返回首頁")]),s("router-link",{staticClass:"btn btn-danger",attrs:{to:"/category"}},[t._v("繼續逛逛")])],1)])])])])],1)},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",{staticClass:"thead-dark text-center"},[s("th",[t._v("品名")]),s("th",[t._v("數量")]),s("th",[t._v("單價")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-danger"},[t._v("確認付款去")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"l-sectionImage l-sectionImage--2"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",{staticClass:"thead-dark text-center"},[s("th",[t._v("品名")]),s("th",[t._v("數量")]),s("th",[t._v("單價")])])}],i=(s("99af"),s("6b34")),n=s("19df"),c={name:"FrontPay",data:function(){return{orderId:"",order:{user:""},status:{isLoading:!1}}},components:{FrontHeader:n["a"]},mixins:[i["a"]],methods:{getOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("fixedgearshop","/order/").concat(t.orderId);t.$http.get(a).then((function(a){a.data.success&&(t.order=a.data.order)}))},payOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("fixedgearshop","/pay/").concat(t.orderId);t.status.isLoading=!0,t.$http.post(a).then((function(a){a.data.success&&(t.getOrder(),setTimeout((function(){t.status.isLoading=!1}),500))}))}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder(),this.getCart()}},o=c,l=s("2877"),d=Object(l["a"])(o,e,r,!1,null,"0cea7e2e",null);a["default"]=d.exports},"6b34":function(t,a,s){"use strict";s("99af");a["a"]={data:function(){return{carts:[],cartNumber:1,cartCurrentNumber:0}},methods:{getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("fixedgearshop","/cart");t.status.isLoading=!0,t.$http.get(a).then((function(a){a.data.success&&(t.carts=a.data.data,t.cartCurrentNumber=t.carts.carts.length,setTimeout((function(){t.status.isLoading=!1}),500))}))},addToCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("fixedgearshop","/cart"),r={product_id:t,qty:a};s.$http.post(e,{data:r}).then((function(t){t.data.success&&(s.cartNumber=1,s.getCart(),s.$bus.$emit("message:push",t.data.message,"success"))}))},deleteCart:function(t){var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("fixedgearshop","/cart/").concat(t);a.$http.delete(s).then((function(t){t.data.success&&(a.getCart(),a.$bus.$emit("message:push",t.data.message,"danger"))}))},updateCartQty:function(t,a,s){var e=this,r="".concat("https://vue-course-api.hexschool.io","/api/").concat("fixedgearshop","/cart"),i={product_id:t,qty:a};e.status.isLoading=!0,e.$http.post(r,{data:i}).then((function(t){t.data.success?(r="".concat(r,"/").concat(s),e.$http.delete(r).then((function(t){t.data.success&&(e.getCart(),e.$bus.$emit("message:push","數量已更新","success"))}))):(e.getCart(),e.$bus.$emit("message:push","數量更新失敗","danger"))}))}}}},8418:function(t,a,s){"use strict";var e=s("c04e"),r=s("9bf2"),i=s("5c6c");t.exports=function(t,a,s){var n=e(a);n in t?r.f(t,n,i(0,s)):t[n]=s}},"99af":function(t,a,s){"use strict";var e=s("23e7"),r=s("d039"),i=s("e8b5"),n=s("861d"),c=s("7b0b"),o=s("50c4"),l=s("8418"),d=s("65f0"),u=s("1dde"),p=s("b622"),m=s("2d00"),_=p("isConcatSpreadable"),v=9007199254740991,f="Maximum allowed index exceeded",b=m>=51||!r((function(){var t=[];return t[_]=!1,t.concat()[0]!==t})),h=u("concat"),g=function(t){if(!n(t))return!1;var a=t[_];return void 0!==a?!!a:i(t)},C=!b||!h;e({target:"Array",proto:!0,forced:C},{concat:function(t){var a,s,e,r,i,n=c(this),u=d(n,0),p=0;for(a=-1,e=arguments.length;a<e;a++)if(i=-1===a?n:arguments[a],g(i)){if(r=o(i.length),p+r>v)throw TypeError(f);for(s=0;s<r;s++,p++)s in i&&l(u,p,i[s])}else{if(p>=v)throw TypeError(f);l(u,p++,i)}return u.length=p,u}})},c115:function(t,a,s){"use strict";var e=s("26a3"),r=s.n(e);r.a},d33b:function(t,a,s){t.exports=s.p+"img/WheelTalk_Logo.de390916.png"},f2bb:function(t,a,s){t.exports=s.p+"img/first-bike-gif.392c91a7.gif"}}]);
//# sourceMappingURL=chunk-74675df8.7a62360f.js.map